/*Obfuscated by JShaman.com*/var Service,Characteristic,api;var request=require('request');var http=require('http');module['exports']=function(_0x464128){Service=_0x464128['hap']['Service'];Characteristic=_0x464128['hap']['Characteristic'];api=_0x464128;_0x464128['registerAccessory']('homebridge-shao','http_c4',HttpAccessory);};function HttpAccessory(_0x2fd2cc,_0x277581){this['log']=_0x2fd2cc;this['service']=_0x277581['service']||'Switch';this['base_url']=_0x277581['base_url'];this['enable_status']=_0x277581['has_on_state']||'yes';this['enable_power_control']=_0x277581['has_power_control']||'yes';this['enable_level']=_0x277581['has_level_control']||'no';this['enable_rgbw']=_0x277581['has_rgbw_control']||'no';this['enable_cct']=_0x277581['has_cct_control']||'no';this['invert_contact']=_0x277581['invert_contact']||'no';this['include_video']=_0x277581['include_video']||'yes';this['keypad']=_0x277581['keypad']||'no';this['notificationID']=_0x277581['uuid_base']['substring'](0xf3d9e^0xf3d9c);if(this['service']=='Motion'||this['service']=='Doorbell'||this['service']=='Blind'){this['enable_power_control']='no';this['enable_blind_onoff']=_0x277581['has_onoff_state']||'no';}if(this['enable_power_control']=='yes'){if(this['service']=='Garage\x20Door'){this['on_url']=this['base_url']+'/close';this['on_body']=_0x277581['open_body'];this['off_url']=this['base_url']+'/open';this['off_body']=_0x277581['close_body'];}else if(this['service']=='Lock'||this['service']=='Door'){this['on_url']=this['base_url']+'/lock';this['on_body']=_0x277581['open_body'];this['off_url']=this['base_url']+'/unlock';this['off_body']=_0x277581['close_body'];}else if(this['service']=='Switch'){this['on_url']=this['base_url']+'/close';this['on_body']=_0x277581['on_body'];this['off_url']=this['base_url']+'/open';this['off_body']=_0x277581['off_body'];}else if(this['service']=='Fan'){this['on_url']=this['base_url']+'/close';this['on_body']=_0x277581['on_body'];this['off_url']=this['base_url']+'/open';this['off_body']=_0x277581['off_body'];}else if(this['service']=='Tv'){this['on_url']=this['base_url']+'/on';this['on_body']=_0x277581['on_body'];this['off_url']=this['base_url']+'/off';this['off_body']=_0x277581['off_body'];}else{this['on_url']=this['base_url']+'/on';this['on_body']=_0x277581['on_body'];this['off_url']=this['base_url']+'/off';this['off_body']=_0x277581['off_body'];}}if(this['service']=='Thermostat'){this['set_mode_url']=this['base_url']+'/set_hvac_mode/%m';this['get_mode_url']=this['base_url']+'/hvac_mode';this['get_status_url']=this['base_url']+'/hvac_status';this['set_target_heat_url']=this['base_url']+'/set_heat_setpoint/%c';this['set_target_cool_url']=this['base_url']+'/set_cool_setpoint/%c';this['get_target_heat_url']=this['base_url']+'/heat_setpoint';this['get_target_cool_url']=this['base_url']+'/cool_setpoint';this['get_temperature_url']=this['base_url']+'/temperature';this['cool_string']=_0x277581['cool_string']||'Cool';this['heat_string']=_0x277581['heat_string']||'Heat';this['off_string']=_0x277581['off_string']||'Off';this['auto_string']=_0x277581['auto_string']||'Auto';this['thermDisplayUnits']=_0x277581['display_units']||0xe09bf^0xe09bf;}var _0x19db64=this;if(this['notificationID']){if(global['notificationRegistration']&&typeof global['notificationRegistration']==='function'){try{global['notificationRegistration'](this['notificationID'],this['handleNotification']['bind'](this),'');}catch(_0x37346e){this['log']('\x27notificationID\x27\x20was\x20specified,\x20however\x20switch\x20is\x20stateless.\x20Ignoring\x20property\x20and\x20not\x20enabling\x20notifications!');}}}if(this['enable_status']=='yes'){if(this['service']=='Light'||this['service']=='Dimmer'||this['service']=='RGBW'||this['service']=='Switch'||this['service']=='Fan'||this['service']=='Tv')this['status_url']=this['base_url']+'/light_state';else if(this['service']=='Door'||this['service']=='Garage\x20Door'||this['service']=='Window'||this['service']=='Contact'||this['service']=='Motion'||this['service']=='Lock'||this['service']=='Doorbell')this['status_url']=this['base_url']+'/contact_state';else this['status_url']=this['base_url']+'/status';}if(this['enable_level']=='yes'){if(this['service']=='Fan'){this['brightness_url']=this['base_url']+'/fan/%b';this['brightnesslvl_url']=this['base_url']+'/brightness';}else if(this['service']=='Blind'){if(this['enable_blind_onoff']=='no'){this['brightness_url']=this['base_url']+'/blindlevel/%b';this['brightnesslvl_url']=this['base_url']+'/blindness';}else{this['brightness_url']=this['base_url']+'/blindlevelonoff/%b';this['brightnesslvl_url']=this['base_url']+'/blindnessonoff';}}else{this['brightness_url']=this['base_url']+'/level/%b';this['brightnesslvl_url']=this['base_url']+'/brightness';}}if(this['enable_rgbw']=='yes'){if(this['service']=='RGBW'){this['rgbw_url']=this['base_url']+'/rgbwlevel/%b';this['sat_url']=this['base_url']+'/satlevel/%b';this['rgbwlvl_url']=this['base_url']+'/rgbw';this['satlvl_url']=this['base_url']+'/sat';}}if(this['enable_cct']=='yes'){if(this['service']=='CCT'){this['cct_url']=this['base_url']+'/cctlevel/%b';this['cctlvl_url']=this['base_url']+'/cct';}}{this['http_method']=_0x277581['http_method']||'GET';;this['http_brightness_method']=_0x277581['http_brightness_method']||this['http_method'];this['username']=_0x277581['username']||'';this['password']=_0x277581['password']||'';this['name']=_0x277581['name'];this['manufacturer']=_0x277581['manufacturer']||'Unknown';this['model']=_0x277581['model']||'Unknown';this['serial']=_0x277581['serial']||'Unknown';this['brightnessHandling']=_0x277581['brightnessHandling']||'no';this['switchHandling']=_0x277581['switchHandling']||'no';}this['state']=![];this['lastSent']=![];this['lastState']=![];if(this['invert_contact']=='yes')this['lastState']=!![];this['secTarState']=0x19f1f^0x19f1c;this['secCurState']=0x9aed7^0x9aed4;this['targetGarageDoorState']=Characteristic['TargetDoorState']['CLOSED'];this['currentlevel']=0x34e92^0x34e92;this['getHue']=0xcae0d^0xcae0d;this['getSat']=0x6a7ae^0x6a7ae;this['getCct']=0xb04a4^0xb0428;this['enableSetState']=!![];this['enableSetTemp']=!![];this['thermCurState']=Characteristic['TargetHeatingCoolingState']['OFF'];this['thermStatus']=Characteristic['TargetHeatingCoolingState']['OFF'];this['thermHeatSet']=-(0xb30b9^0xb30dd);this['thermCoolSet']=-(0x72dc0^0x72da4);this['thermCurrentTemp']=-0x64;this['thermTarState']=Characteristic['TargetHeatingCoolingState']['OFF'];this['garageCheck']=-0x1;if(this['status_url']&&this['switchHandling']=='realtime'){var _0x45ae6e=this['status_url'];var _0x17dc38='';var _0x5560a9='';var _0x1c356f='';var _0x3af813='';if(this['service']!='Thermostat'){_0x19db64['httpRequest'](_0x45ae6e,'','GET',_0x19db64['username'],_0x19db64['password'],function(_0x10ab4a,_0x5b39b2,_0xe3b33){if(_0x10ab4a){_0x19db64['log']('HTTP\x20get\x20power\x20function\x20failed:\x20%s',_0x10ab4a['message']);return;}else{var _0x1712e1=parseInt(_0xe3b33['replace'](/\D/g,''));_0x19db64['state']=_0x1712e1>0x0;_0x19db64['enableSet']=!![];switch(_0x19db64['service']){case'Switch':if(_0x19db64['switchService']){_0x19db64['switchService']['getCharacteristic'](Characteristic['On'])['updateValue'](_0x19db64['state']);}break;case'Tv':if(_0x19db64['tvService']){_0x19db64['tvService']['getCharacteristic'](Characteristic['On'])['updateValue'](_0x19db64['state']);}break;case'Light':case'Dimmer':case'RGBW':case'CCT':if(_0x19db64['lightbulbService']){_0x19db64['lightbulbService']['getCharacteristic'](Characteristic['On'])['updateValue'](_0x19db64['state']||_0x19db64['currentlevel']>0x0);}break;case'Door':if(_0x19db64['doorService']){_0x19db64['doorService']['getCharacteristic'](Characteristic['CurrentPosition'])['updateValue'](_0x19db64['state']?0x0:0x5f134^0x5f150);_0x19db64['doorService']['getCharacteristic'](Characteristic['TargetPosition'])['updateValue'](_0x19db64['state']?0x0:0x64);_0x19db64['doorService']['getCharacteristic'](Characteristic['PositionState'])['updateValue'](0x40e34^0x40e36);}break;case'Window':if(_0x19db64['windowService']){_0x19db64['windowService']['getCharacteristic'](Characteristic['CurrentPosition'])['updateValue'](_0x19db64['state']?0xf1944^0xf1944:0x6f971^0x6f915);_0x19db64['windowService']['getCharacteristic'](Characteristic['TargetPosition'])['updateValue'](_0x19db64['state']?0x0:0x64900^0x64964);_0x19db64['windowService']['getCharacteristic'](Characteristic['PositionState'])['updateValue'](0x2);}break;case'Garage\x20Door':if(_0x19db64['garageService']){_0x19db64['targetGarageDoorState']=_0x19db64['state']?Characteristic['CurrentDoorState']['CLOSED']:Characteristic['CurrentDoorState']['OPEN'];_0x19db64['garageService']['getCharacteristic'](Characteristic['CurrentDoorState'])['updateValue'](_0x19db64['targetGarageDoorState']);_0x19db64['garageService']['getCharacteristic'](Characteristic['TargetDoorState'])['updateValue'](_0x19db64['targetGarageDoorState']);}break;case'Lock':if(_0x19db64['lockService']){_0x19db64['lockService']['getCharacteristic'](Characteristic['LockCurrentState'])['updateValue'](!_0x19db64['state']?Characteristic['LockCurrentState']['SECURED']:Characteristic['LockCurrentState']['UNSECURED']);_0x19db64['lockService']['getCharacteristic'](Characteristic['LockTargetState'])['updateValue'](!_0x19db64['state']?Characteristic['LockTargetState']['SECURED']:Characteristic['LockTargetState']['UNSECURED']);}break;case'Contact':if(_0x19db64['contactService']){var _0x22d387=!![];if(_0x19db64['invert_contact']=='yes'){_0x22d387=![];}_0x19db64['contactService']['getCharacteristic'](Characteristic['ContactSensorState'])['updateValue'](_0x19db64['state']==_0x22d387?Characteristic['ContactSensorState']['CONTACT_DETECTED']:Characteristic['ContactSensorState']['CONTACT_NOT_DETECTED']);}break;case'Doorbell':if(_0x19db64['doorbellService']){var _0x22d387=!![];if(_0x19db64['invert_contact']=='yes'){_0x22d387=![];}if(_0x19db64['state']==_0x22d387&&_0x19db64['state']!=_0x19db64['lastState']){_0x19db64['lastSent']=!_0x19db64['lastSent'];_0x19db64['doorbellService']['getCharacteristic'](Characteristic['ProgrammableSwitchEvent'])['updateValue'](_0x19db64['lastSent']?0x1:0x463d1^0x463d1);}_0x19db64['lastState']=_0x19db64['state'];}break;case'Motion':if(_0x19db64['motionService']){var _0x22d387=!![];if(_0x19db64['invert_contact']=='yes'){_0x22d387=![];}_0x19db64['motionService']['getCharacteristic'](Characteristic['MotionDetected'])['updateValue'](_0x19db64['state']==_0x22d387?_0x19db64['state']:!_0x19db64['state']);}break;case'Fan':if(_0x19db64['fanService']){_0x19db64['fanService']['getCharacteristic'](Characteristic['On'])['updateValue'](_0x19db64['state']);}break;}}_0x19db64['enableSet']=!![];});}else{{curhvacstatusurl=this['get_status_url'];_0x19db64['httpRequest'](curhvacstatusurl,'','GET',_0x19db64['username'],_0x19db64['password'],function(_0x11d3e1,_0x468a1b,_0x4932f9){if(_0x11d3e1){_0x19db64['log']('HTTP\x20get\x20hvac\x20status\x20function\x20failed:\x20%s',_0x11d3e1['message']);return;}else{var _0x58cc62=Characteristic['TargetHeatingCoolingState']['OFF'];if(_0x4932f9['includes'](_0x19db64['cool_string'])){_0x58cc62=Characteristic['TargetHeatingCoolingState']['COOL'];}else if(_0x4932f9['includes'](_0x19db64['heat_string'])){_0x58cc62=Characteristic['TargetHeatingCoolingState']['HEAT'];}_0x19db64['thermCurState']=_0x58cc62;_0x19db64['enableSetState']=![];if(_0x58cc62>=0x0&&_0x58cc62<=0x2)_0x19db64['thermostatService']['getCharacteristic'](Characteristic['CurrentHeatingCoolingState'])['updateValue'](_0x58cc62);else _0x19db64['log'](_0x19db64['service'],'Received\x20hvac\x20status\x20that\x20is\x20out\x20of\x20range.\x20\x20Cannot\x20set\x20status:\x20',_0x58cc62,'\x20from\x20data:\x20',data);_0x19db64['enableSet']=!![];}});}{_0x17dc38=this['get_mode_url'];_0x19db64['httpRequest'](_0x17dc38,'','GET',_0x19db64['username'],_0x19db64['password'],function(_0x17c98e,_0xbb963a,_0x32ac56){if(_0x17c98e){_0x19db64['log']('HTTP\x20get\x20hvac\x20state\x20function\x20failed:\x20%s',_0x17c98e['message']);return;}else{var _0x1c3654=Characteristic['TargetHeatingCoolingState']['OFF'];if(_0x32ac56==_0x19db64['cool_string']){_0x1c3654=Characteristic['TargetHeatingCoolingState']['COOL'];}else if(_0x32ac56==_0x19db64['heat_string']){_0x1c3654=Characteristic['TargetHeatingCoolingState']['HEAT'];}else if(_0x32ac56==_0x19db64['auto_string']){_0x1c3654=Characteristic['TargetHeatingCoolingState']['AUTO'];}_0x19db64['thermTarState']=_0x1c3654;_0x19db64['enableSetState']=![];_0x19db64['thermostatService']['getCharacteristic'](Characteristic['TargetHeatingCoolingState'])['updateValue'](_0x19db64['thermTarState']);_0x19db64['enableSetState']=!![];if(_0x19db64['thermTarState']==Characteristic['TargetHeatingCoolingState']['AUTO']){if(_0x19db64['thermCurrentTemp']!=-0x64&&_0x19db64['thermCoolSet']!=-0x64&&_0x19db64['thermHeatSet']!=-0x64){var _0x4ecb62=_0x19db64['thermCurrentTemp']-_0x19db64['thermCoolSet'];if(_0x4ecb62<0x0)_0x4ecb62=_0x4ecb62*-(0x7e78e^0x7e78f);var _0x4e8b61=_0x19db64['thermCurrentTemp']-_0x19db64['thermHeatSet'];if(_0x4e8b61<(0x27dce^0x27dce))_0x4e8b61=_0x4e8b61*-0x1;if(_0x4ecb62<_0x4e8b61)_0x1c3654=Characteristic['TargetHeatingCoolingState']['COOL'];else _0x1c3654=Characteristic['TargetHeatingCoolingState']['HEAT'];}else{_0x1c3654=Characteristic['TargetHeatingCoolingState']['OFF'];}}_0x19db64['enableSetTemp']=![];if(_0x1c3654==Characteristic['TargetHeatingCoolingState']['COOL']&&_0x19db64['thermCoolSet']!=-(0x36251^0x36235)){if(_0x19db64['thermCoolSet']>=0xa&&_0x19db64['thermCoolSet']<=(0x6d6de^0x6d6f8))_0x19db64['thermostatService']['getCharacteristic'](Characteristic['TargetTemperature'])['updateValue'](_0x19db64['thermCoolSet']);else _0x19db64['log'](_0x19db64['service'],'Current\x20cool\x20setpoint\x20is\x20outside\x20of\x20range.\x20\x20Cannot\x20set\x20target\x20temperature:\x20',_0x19db64['thermCoolSet']);}if(_0x1c3654==Characteristic['TargetHeatingCoolingState']['HEAT']&&_0x19db64['thermHeatSet']!=-0x64){if(_0x19db64['thermHeatSet']>=0xa&&_0x19db64['thermHeatSet']<=0x26)_0x19db64['thermostatService']['getCharacteristic'](Characteristic['TargetTemperature'])['updateValue'](_0x19db64['thermHeatSet']);else _0x19db64['log'](_0x19db64['service'],'Current\x20heat\x20setpoint\x20is\x20outside\x20of\x20range.\x20\x20Cannot\x20set\x20target\x20temperature:\x20',_0x19db64['thermHeatSet']);}_0x19db64['enableSetTemp']=!![];}_0x19db64['enableSet']=!![];});}{_0x5560a9=this['get_target_heat_url'];_0x19db64['httpRequest'](_0x5560a9,'','GET',_0x19db64['username'],_0x19db64['password'],function(_0x3977af,_0x310a76,_0x4cb28d){if(_0x3977af){_0x19db64['log']('HTTP\x20get\x20hvac\x20heat\x20setpoint\x20function\x20failed:\x20%s',_0x3977af['message']);return;}else{_0x19db64['thermHeatSet']=parseFloat(_0x4cb28d);var _0x523232=_0x19db64['thermTarState'];if(_0x19db64['thermTarState']==Characteristic['TargetHeatingCoolingState']['AUTO']){if(_0x19db64['thermCurrentTemp']!=-(0x588d5^0x588b1)&&_0x19db64['thermCoolSet']!=-0x64&&_0x19db64['thermHeatSet']!=-0x64){var _0x30430a=_0x19db64['thermCurrentTemp']-_0x19db64['thermCoolSet'];if(_0x30430a<0x0)_0x30430a=_0x30430a*-0x1;var _0x112403=_0x19db64['thermCurrentTemp']-_0x19db64['thermHeatSet'];if(_0x112403<0x0)_0x112403=_0x112403*-(0xca848^0xca849);if(_0x30430a<_0x112403)_0x523232=Characteristic['TargetHeatingCoolingState']['COOL'];else _0x523232=Characteristic['TargetHeatingCoolingState']['HEAT'];}else{_0x523232=Characteristic['TargetHeatingCoolingState']['OFF'];}}_0x19db64['enableSetTemp']=![];if(_0x523232==Characteristic['TargetHeatingCoolingState']['HEAT']){if(_0x19db64['thermHeatSet']>=0xa&&_0x19db64['thermHeatSet']<=0x26)_0x19db64['thermostatService']['getCharacteristic'](Characteristic['TargetTemperature'])['updateValue'](_0x19db64['thermHeatSet']);else _0x19db64['log'](_0x19db64['service'],'Current\x20heat\x20setpoint\x20is\x20outside\x20of\x20range.\x20\x20Cannot\x20set\x20current\x20temperature:\x20',_0x19db64['thermHeatSet']);}_0x19db64['enableSetTemp']=!![];}});}{_0x1c356f=this['get_target_cool_url'];_0x19db64['httpRequest'](_0x1c356f,'','GET',_0x19db64['username'],_0x19db64['password'],function(_0x2e4b61,_0x5c1b1f,_0x2ae363){if(_0x2e4b61){_0x19db64['log']('HTTP\x20get\x20hvac\x20cool\x20setpoint\x20function\x20failed:\x20%s',_0x2e4b61['message']);return;}else{_0x19db64['thermCoolSet']=parseFloat(_0x2ae363);var _0x311d5d=_0x19db64['thermTarState'];if(_0x19db64['thermTarState']==Characteristic['TargetHeatingCoolingState']['AUTO']){if(_0x19db64['thermCurrentTemp']!=-(0xecc7d^0xecc19)&&_0x19db64['thermCoolSet']!=-0x64&&_0x19db64['thermHeatSet']!=-(0xed14c^0xed128)){var _0x30bbd9=_0x19db64['thermCurrentTemp']-_0x19db64['thermCoolSet'];if(_0x30bbd9<0x0)_0x30bbd9=_0x30bbd9*-0x1;var _0x7a7ab5=_0x19db64['thermCurrentTemp']-_0x19db64['thermHeatSet'];if(_0x7a7ab5<(0xb24f7^0xb24f7))_0x7a7ab5=_0x7a7ab5*-(0x9b2a0^0x9b2a1);if(_0x30bbd9<_0x7a7ab5)_0x311d5d=Characteristic['TargetHeatingCoolingState']['COOL'];else _0x311d5d=Characteristic['TargetHeatingCoolingState']['HEAT'];}else{_0x311d5d=Characteristic['TargetHeatingCoolingState']['OFF'];}}_0x19db64['enableSetTemp']=![];if(_0x311d5d==Characteristic['TargetHeatingCoolingState']['COOL']){if(_0x19db64['thermCoolSet']>=(0x48b8d^0x48b87)&&_0x19db64['thermCoolSet']<=0x26)_0x19db64['thermostatService']['getCharacteristic'](Characteristic['TargetTemperature'])['updateValue'](_0x19db64['thermCoolSet']);else _0x19db64['log'](_0x19db64['service'],'Current\x20cool\x20setpoint\x20is\x20outside\x20of\x20range.\x20\x20Cannot\x20set\x20target\x20temperature:\x20',_0x19db64['thermCoolSet']);}_0x19db64['enableSetTemp']=!![];}});}{_0x3af813=this['get_temperature_url'];_0x19db64['httpRequest'](_0x3af813,'','GET',_0x19db64['username'],_0x19db64['password'],function(_0x136879,_0x5077f0,_0x454707){if(_0x136879){_0x19db64['log']('HTTP\x20get\x20current\x20temperature\x20function\x20failed:\x20%s',_0x136879['message']);return;}else{_0x19db64['thermCurrentTemp']=parseFloat(_0x454707);_0x19db64['enableSetTemp']=![];if(_0x19db64['thermCurrentTemp']>=0x0&&_0x19db64['thermCurrentTemp']<=0x64)_0x19db64['thermostatService']['getCharacteristic'](Characteristic['CurrentTemperature'])['updateValue'](_0x19db64['thermCurrentTemp']);else _0x19db64['log'](_0x19db64['service'],'Received\x20temperature\x20that\x20is\x20outside\x20of\x20range.\x20\x20Cannot\x20set\x20current\x20temperature:\x20',_0x19db64['thermCurrentTemp']);var _0x338545=Characteristic['TargetHeatingCoolingState']['OFF'];if(_0x19db64['thermTarState']==Characteristic['TargetHeatingCoolingState']['AUTO']){if(_0x19db64['thermCurrentTemp']!=-0x64&&_0x19db64['thermCoolSet']!=-0x64&&_0x19db64['thermHeatSet']!=-(0x793ef^0x7938b)){var _0x41510b=_0x19db64['thermCurrentTemp']-_0x19db64['thermCoolSet'];if(_0x41510b<(0x98dce^0x98dce))_0x41510b=_0x41510b*-0x1;var _0x515c29=_0x19db64['thermCurrentTemp']-_0x19db64['thermHeatSet'];if(_0x515c29<0x0)_0x515c29=_0x515c29*-(0xc446b^0xc446a);if(_0x41510b<_0x515c29)_0x338545=Characteristic['TargetHeatingCoolingState']['COOL'];else _0x338545=Characteristic['TargetHeatingCoolingState']['HEAT'];}else{_0x338545=Characteristic['TargetHeatingCoolingState']['OFF'];}}_0x19db64['enableSetTemp']=!![];}});}}}if(this['brightnesslvl_url']&&this['brightnessHandling']=='realtime'){var _0x165181=this['brightnesslvl_url'];_0x19db64['httpRequest'](_0x165181,'','GET',_0x19db64['username'],_0x19db64['password'],function(_0x51151a,_0x4e5ae8,_0x43b075){if(_0x51151a){_0x19db64['log']('HTTP\x20get\x20power\x20function\x20failed:\x20%s',_0x51151a['message']);return;}else{_0x19db64['currentlevel']=parseInt(_0x43b075);_0x19db64['state']=_0x19db64['currentlevel']>0x0;_0x19db64['enableSet']=![];switch(_0x19db64['service']){case'Light':case'Dimmer':case'RGBW':case'CCT':if(_0x19db64['lightbulbService']){_0x19db64['lightbulbService']['getCharacteristic'](Characteristic['Brightness'])['updateValue'](_0x19db64['currentlevel']);_0x19db64['lightbulbService']['getCharacteristic'](Characteristic['On'])['updateValue'](_0x19db64['state']||_0x19db64['currentlevel']>0x0);}break;case'Blind':if(_0x19db64['blindService']){_0x19db64['blindService']['getCharacteristic'](Characteristic['CurrentPosition'])['updateValue'](_0x19db64['currentlevel']);_0x19db64['blindService']['getCharacteristic'](Characteristic['TargetPosition'])['updateValue'](_0x19db64['currentlevel']);_0x19db64['blindService']['getCharacteristic'](Characteristic['PositionState'])['updateValue'](0x7c7ae^0x7c7ac);}break;case'Fan':if(_0x19db64['fanService']){_0x19db64['fanService']['getCharacteristic'](Characteristic['RotationSpeed'])['updateValue'](_0x19db64['currentlevel']*0x19);_0x19db64['fanService']['getCharacteristic'](Characteristic['On'])['updateValue'](_0x19db64['state']);}break;}_0x19db64['enableSet']=!![];}});}if(this['rgbwlvl_url']&&this['brightnessHandling']=='realtime'){var _0x10e34f=this['rgbwlvl_url'];_0x19db64['httpRequest'](_0x10e34f,'','GET',_0x19db64['username'],_0x19db64['password'],function(_0x265776,_0x1a7647,_0x3b7ec5){if(_0x265776){_0x19db64['log']('HTTP\x20get\x20rgbw\x20function\x20failed:\x20%s',_0x265776['message']);return;}else{_0x19db64['getHue']=parseInt(_0x3b7ec5);_0x19db64['enableSet']=![];switch(_0x19db64['service']){case'RGBW':if(_0x19db64['lightbulbService']){_0x19db64['lightbulbService']['getCharacteristic'](Characteristic['Hue'])['updateValue'](_0x19db64['getHue']);}break;}_0x19db64['enableSet']=!![];}});}if(this['satlvl_url']&&this['brightnessHandling']=='realtime'){var _0x11621c=this['satlvl_url'];_0x19db64['httpRequest'](_0x11621c,'','GET',_0x19db64['username'],_0x19db64['password'],function(_0x310843,_0x3e02a6,_0x145487){if(_0x310843){_0x19db64['log']('HTTP\x20get\x20sat\x20function\x20failed:\x20%s',_0x310843['message']);return;}else{_0x19db64['getSat']=parseInt(_0x145487);_0x19db64['enableSet']=![];switch(_0x19db64['service']){case'RGBW':if(_0x19db64['lightbulbService']){_0x19db64['lightbulbService']['getCharacteristic'](Characteristic['Saturation'])['updateValue'](_0x19db64['getSat']);}break;}_0x19db64['enableSet']=!![];}});}if(this['cctlvl_url']&&this['brightnessHandling']=='realtime'){var _0x10e34f=this['cctlvl_url'];_0x19db64['httpRequest'](_0x10e34f,'','GET',_0x19db64['username'],_0x19db64['password'],function(_0x3c483b,_0x304664,_0x195299){if(_0x3c483b){_0x19db64['log']('HTTP\x20get\x20rgbw\x20function\x20failed:\x20%s',_0x3c483b['message']);return;}else{_0x19db64['getCct']=parseInt(_0x195299);_0x19db64['enableSet']=![];switch(_0x19db64['service']){case'CCT':if(_0x19db64['lightbulbService']){_0x19db64['lightbulbService']['getCharacteristic'](Characteristic['ColorTemperature'])['updateValue'](_0x19db64['getCct']);}break;}_0x19db64['enableSet']=!![];}});}}HttpAccessory['prototype']={'handleNotification':function(_0x2a29d7){var _0x2db41d=this;var _0x4ab0ea=_0x2a29d7['characteristic'];var _0x6ab32e=_0x2a29d7['value'];if(_0x4ab0ea=='1000'){var _0x40104a=parseInt(_0x6ab32e['replace'](/\D/g,''));_0x2db41d['state']=_0x40104a>(0x846fc^0x846fc);_0x2db41d['enableSet']=![];switch(_0x2db41d['service']){case'Switch':if(_0x2db41d['switchService']){_0x2db41d['switchService']['getCharacteristic'](Characteristic['On'])['updateValue'](_0x2db41d['state']);}break;case'Tv':if(_0x2db41d['tvService']){_0x2db41d['tvService']['getCharacteristic'](Characteristic['On'])['updateValue'](_0x2db41d['state']);}break;case'Light':case'Dimmer':case'RGBW':case'CCT':if(_0x2db41d['lightbulbService']){_0x2db41d['lightbulbService']['getCharacteristic'](Characteristic['On'])['updateValue'](_0x2db41d['state']);}break;case'Door':if(_0x2db41d['doorService']){_0x2db41d['doorService']['getCharacteristic'](Characteristic['CurrentPosition'])['updateValue'](_0x2db41d['state']?0xa7dc5^0xa7dc5:0x50f95^0x50ff1);_0x2db41d['doorService']['getCharacteristic'](Characteristic['TargetPosition'])['updateValue'](_0x2db41d['state']?0x0:0x64);_0x2db41d['doorService']['getCharacteristic'](Characteristic['PositionState'])['updateValue'](0x2e730^0x2e732);}break;case'Window':if(_0x2db41d['windowService']){_0x2db41d['windowService']['getCharacteristic'](Characteristic['CurrentPosition'])['updateValue'](_0x2db41d['state']?0x0:0x2a111^0x2a175);_0x2db41d['windowService']['getCharacteristic'](Characteristic['TargetPosition'])['updateValue'](_0x2db41d['state']?0x94895^0x94895:0xad940^0xad924);_0x2db41d['windowService']['getCharacteristic'](Characteristic['PositionState'])['updateValue'](0x2);}break;case'Garage\x20Door':if(_0x2db41d['garageService']){_0x2db41d['targetGarageDoorState']=_0x2db41d['state']?Characteristic['CurrentDoorState']['CLOSED']:Characteristic['CurrentDoorState']['OPEN'];_0x2db41d['garageService']['getCharacteristic'](Characteristic['CurrentDoorState'])['updateValue'](_0x2db41d['targetGarageDoorState']);_0x2db41d['garageService']['getCharacteristic'](Characteristic['TargetDoorState'])['updateValue'](_0x2db41d['targetGarageDoorState']);}break;case'Lock':if(_0x2db41d['lockService']){_0x2db41d['lockService']['getCharacteristic'](Characteristic['LockCurrentState'])['updateValue'](!_0x2db41d['state']?Characteristic['LockCurrentState']['SECURED']:Characteristic['LockCurrentState']['UNSECURED']);_0x2db41d['lockService']['getCharacteristic'](Characteristic['LockTargetState'])['updateValue'](!_0x2db41d['state']?Characteristic['LockTargetState']['SECURED']:Characteristic['LockTargetState']['UNSECURED']);}break;case'Contact':if(_0x2db41d['contactService']){var _0x422ed0=!![];if(_0x2db41d['invert_contact']=='yes'){_0x422ed0=![];}_0x2db41d['contactService']['getCharacteristic'](Characteristic['ContactSensorState'])['updateValue'](_0x2db41d['state']==_0x422ed0?Characteristic['ContactSensorState']['CONTACT_DETECTED']:Characteristic['ContactSensorState']['CONTACT_NOT_DETECTED']);}break;case'Doorbell':if(_0x2db41d['doorbellService']){var _0x422ed0=!![];if(_0x2db41d['invert_contact']=='yes'){_0x422ed0=![];}if(_0x2db41d['state']==_0x422ed0&&_0x2db41d['state']!=_0x2db41d['lastState']){_0x2db41d['lastSent']=!_0x2db41d['lastSent'];_0x2db41d['doorbellService']['getCharacteristic'](Characteristic['ProgrammableSwitchEvent'])['updateValue'](_0x2db41d['lastSent']?0xbb10b^0xbb10a:0x0);}_0x2db41d['lastState']=_0x2db41d['state'];}break;case'Motion':if(_0x2db41d['motionService']){var _0x422ed0=!![];if(_0x2db41d['invert_contact']=='yes'){_0x422ed0=![];}_0x2db41d['motionService']['getCharacteristic'](Characteristic['MotionDetected'])['updateValue'](_0x2db41d['state']==_0x422ed0?_0x2db41d['state']:!_0x2db41d['state']);}break;case'Fan':if(_0x2db41d['fanService']){_0x2db41d['fanService']['getCharacteristic'](Characteristic['On'])['updateValue'](_0x2db41d['state']);}break;}_0x2db41d['enableSet']=!![];}else if(_0x4ab0ea=='1001'){_0x2db41d['currentlevel']=parseInt(_0x6ab32e['replace'](/\D/g,''));_0x2db41d['state']=_0x2db41d['currentlevel']>0x0;_0x2db41d['enableSet']=![];switch(_0x2db41d['service']){case'Dimmer':case'RGBW':case'CCT':if(_0x2db41d['lightbulbService']){_0x2db41d['lightbulbService']['getCharacteristic'](Characteristic['On'])['updateValue'](_0x2db41d['state']);_0x2db41d['lightbulbService']['getCharacteristic'](Characteristic['Brightness'])['updateValue'](_0x2db41d['currentlevel']);}break;case'Fan':if(_0x2db41d['fanService']){_0x2db41d['fanService']['getCharacteristic'](Characteristic['RotationSpeed'])['updateValue'](_0x2db41d['currentlevel']*0x19);}break;}_0x2db41d['enableSet']=!![];}else if(_0x4ab0ea=='1003'){_0x2db41d['currentlevel']=parseInt(_0x6ab32e['replace'](/\D/g,''));_0x2db41d['state']=_0x2db41d['currentlevel']>(0x1936c^0x1936c);_0x2db41d['enableSet']=![];switch(_0x2db41d['service']){case'Blind':if(_0x2db41d['blindService']){_0x2db41d['blindService']['getCharacteristic'](Characteristic['TargetPosition'])['updateValue'](_0x2db41d['currentlevel']);const _0x5536d4=setTimeout(function(){_0x2db41d['blindService']['getCharacteristic'](Characteristic['CurrentPosition'])['updateValue'](_0x2db41d['currentlevel']);_0x2db41d['blindService']['getCharacteristic'](Characteristic['PositionState'])['updateValue'](0xa0428^0xa042a);}['bind'](_0x2db41d),0x3e8);}break;}_0x2db41d['enableSet']=!![];}else if(_0x4ab0ea=='1204'){_0x2db41d['getSat']=parseInt(_0x6ab32e['replace'](/\D/g,''));_0x2db41d['enableSet']=![];switch(_0x2db41d['service']){case'RGBW':if(_0x2db41d['lightbulbService']){_0x2db41d['lightbulbService']['getCharacteristic'](Characteristic['Saturation'])['updateValue'](_0x2db41d['getSat']);}break;}_0x2db41d['enableSet']=!![];}else if(_0x4ab0ea=='1203'){_0x2db41d['getHue']=parseInt(_0x6ab32e['replace'](/\D/g,''));_0x2db41d['enableSet']=![];switch(_0x2db41d['service']){case'RGBW':if(_0x2db41d['lightbulbService']){_0x2db41d['lightbulbService']['getCharacteristic'](Characteristic['Hue'])['updateValue'](_0x2db41d['getHue']);}break;}_0x2db41d['enableSet']=!![];}else if(_0x4ab0ea=='1202'){_0x2db41d['getCct']=parseInt(_0x6ab32e['replace'](/\D/g,''));_0x2db41d['enableSet']=![];switch(_0x2db41d['service']){case'CCT':if(_0x2db41d['lightbulbService']){_0x2db41d['lightbulbService']['getCharacteristic'](Characteristic['ColorTemperature'])['updateValue'](_0x2db41d['getCct']);}break;}_0x2db41d['enableSet']=!![];}else if(_0x4ab0ea=='1005'){var _0x40104a=parseInt(_0x6ab32e['replace'](/\D/g,''));_0x2db41d['currentlevel']=_0x40104a;_0x2db41d['enableSet']=![];switch(_0x2db41d['service']){case'Blind':if(_0x2db41d['blindService']){_0x2db41d['blindService']['getCharacteristic'](Characteristic['TargetPosition'])['updateValue'](_0x2db41d['currentlevel']);const _0x5804d7=setTimeout(function(){_0x2db41d['blindService']['getCharacteristic'](Characteristic['CurrentPosition'])['updateValue'](_0x2db41d['currentlevel']);_0x2db41d['blindService']['getCharacteristic'](Characteristic['PositionState'])['updateValue'](0x2);}['bind'](_0x2db41d),0x3e8);}break;}_0x2db41d['enableSet']=!![];}else if(_0x4ab0ea=='1107'){var _0x21ba18=Characteristic['TargetHeatingCoolingState']['OFF'];if(_0x6ab32e['includes'](_0x2db41d['cool_string'])){_0x21ba18=Characteristic['TargetHeatingCoolingState']['COOL'];}else if(_0x6ab32e['includes'](_0x2db41d['heat_string'])){_0x21ba18=Characteristic['TargetHeatingCoolingState']['HEAT'];}else if(_0x6ab32e['includes'](_0x2db41d['auto_string'])){_0x21ba18=Characteristic['TargetHeatingCoolingState']['AUTO'];}if(_0x21ba18>=0x0&&_0x21ba18<=0x2){_0x2db41d['thermStatus']=_0x21ba18;_0x2db41d['thermostatService']['getCharacteristic'](Characteristic['CurrentHeatingCoolingState'])['updateValue'](_0x21ba18);}else{}}else if(_0x4ab0ea=='1104'){_0x2db41d['enableSetTemp']=![];_0x2db41d['enableSetState']=![];var _0x21ba18=Characteristic['TargetHeatingCoolingState']['OFF'];if(_0x6ab32e==_0x2db41d['cool_string']){_0x21ba18=Characteristic['TargetHeatingCoolingState']['COOL'];}else if(_0x6ab32e==_0x2db41d['heat_string']){_0x21ba18=Characteristic['TargetHeatingCoolingState']['HEAT'];}else if(_0x6ab32e==_0x2db41d['auto_string']){_0x21ba18=Characteristic['TargetHeatingCoolingState']['AUTO'];}_0x2db41d['thermTarState']=_0x21ba18;_0x2db41d['thermostatService']['getCharacteristic'](Characteristic['TargetHeatingCoolingState'])['updateValue'](_0x2db41d['thermTarState']);if(_0x2db41d['thermTarState']==Characteristic['TargetHeatingCoolingState']['AUTO']){if(_0x2db41d['thermCurrentTemp']!=-(0x44179^0x4411d)&&_0x2db41d['thermCoolSet']!=-(0xc5e30^0xc5e54)&&_0x2db41d['thermHeatSet']!=-0x64){var _0x262e1c=_0x2db41d['thermCurrentTemp']-_0x2db41d['thermCoolSet'];if(_0x262e1c<0x0)_0x262e1c=_0x262e1c*-0x1;var _0x4c14f8=_0x2db41d['thermCurrentTemp']-_0x2db41d['thermHeatSet'];if(_0x4c14f8<(0xe4546^0xe4546))_0x4c14f8=_0x4c14f8*-(0xdaa56^0xdaa57);if(_0x262e1c<_0x4c14f8)_0x21ba18=Characteristic['TargetHeatingCoolingState']['COOL'];else _0x21ba18=Characteristic['TargetHeatingCoolingState']['HEAT'];}else{_0x21ba18=Characteristic['TargetHeatingCoolingState']['OFF'];}}if(_0x21ba18==Characteristic['TargetHeatingCoolingState']['COOL']&&_0x2db41d['thermCoolSet']!=-0x64){if(_0x2db41d['thermCoolSet']>=0xa&&_0x2db41d['thermCoolSet']<=0x26)_0x2db41d['thermostatService']['getCharacteristic'](Characteristic['TargetTemperature'])['updateValue'](_0x2db41d['thermCoolSet']);else _0x2db41d['log'](_0x2db41d['service'],'Cool\x20setpoint\x20is\x20outside\x20of\x20valid\x20range.\x20\x20Cannot\x20set\x20target\x20temperature:\x20',_0x2db41d['thermCoolSet']);}if(_0x21ba18==Characteristic['TargetHeatingCoolingState']['HEAT']&&_0x2db41d['thermHeatSet']!=-0x64){if(_0x2db41d['thermHeatSet']>=0xa&&_0x2db41d['thermHeatSet']<=0x26)_0x2db41d['thermostatService']['getCharacteristic'](Characteristic['TargetTemperature'])['updateValue'](_0x2db41d['thermHeatSet']);else _0x2db41d['log'](_0x2db41d['service'],'Heat\x20setpoint\x20is\x20outside\x20of\x20valid\x20range.\x20\x20Cannot\x20set\x20target\x20temperature:\x20',_0x2db41d['thermHeatSet']);}_0x2db41d['enableSetTemp']=!![];_0x2db41d['enableSetState']=!![];}else if(_0x4ab0ea=='1131'){if(_0x2db41d['thermostatService']){_0x2db41d['thermCurrentTemp']=parseFloat(_0x6ab32e);if(_0x2db41d['thermCurrentTemp']>=0x0&&_0x2db41d['thermCurrentTemp']<=(0xd4e05^0xd4e61))_0x2db41d['thermostatService']['getCharacteristic'](Characteristic['CurrentTemperature'])['updateValue'](parseFloat(_0x6ab32e));else _0x2db41d['log'](_0x2db41d['service'],'Received\x20temperature\x20is\x20outside\x20of\x20valid\x20range.\x20\x20Cannot\x20set\x20temperature:\x20',_0x2db41d['thermCurrentTemp']);}}else if(_0x4ab0ea=='1133'){_0x2db41d['enableSetTemp']=![];_0x2db41d['enableSetState']=![];var _0x21ba18=Characteristic['TargetHeatingCoolingState']['OFF'];if(_0x2db41d['thermostatService']){_0x2db41d['thermHeatSet']=parseFloat(_0x6ab32e);var _0x21ba18=_0x2db41d['thermTarState'];if(_0x2db41d['thermTarState']==Characteristic['TargetHeatingCoolingState']['AUTO']){if(_0x2db41d['thermCurrentTemp']!=-0x64&&_0x2db41d['thermCoolSet']!=-(0x5b518^0x5b57c)&&_0x2db41d['thermHeatSet']!=-0x64){var _0x262e1c=_0x2db41d['thermCurrentTemp']-_0x2db41d['thermCoolSet'];if(_0x262e1c<0x0)_0x262e1c=_0x262e1c*-0x1;var _0x4c14f8=_0x2db41d['thermCurrentTemp']-_0x2db41d['thermHeatSet'];if(_0x4c14f8<(0x6458e^0x6458e))_0x4c14f8=_0x4c14f8*-0x1;if(_0x262e1c<_0x4c14f8)_0x21ba18=Characteristic['TargetHeatingCoolingState']['COOL'];else _0x21ba18=Characteristic['TargetHeatingCoolingState']['HEAT'];}else{_0x21ba18=Characteristic['TargetHeatingCoolingState']['OFF'];}}if(_0x21ba18==Characteristic['TargetHeatingCoolingState']['HEAT']){if(_0x2db41d['thermHeatSet']>=(0x97196^0x9719c)&&_0x2db41d['thermHeatSet']<=(0xe796d^0xe794b))_0x2db41d['thermostatService']['getCharacteristic'](Characteristic['TargetTemperature'])['updateValue'](_0x2db41d['thermHeatSet']);else _0x2db41d['log'](_0x2db41d['service'],'Current\x20heat\x20setpoint\x20is\x20outside\x20of\x20range.\x20\x20Cannot\x20set\x20target\x20temperature:\x20',_0x2db41d['thermHeatSet']);}}_0x2db41d['enableSetTemp']=!![];_0x2db41d['enableSetState']=!![];}else if(_0x4ab0ea=='1135'){_0x2db41d['enableSetTemp']=![];_0x2db41d['enableSetState']=![];if(_0x2db41d['thermostatService']){_0x2db41d['thermCoolSet']=parseFloat(_0x6ab32e);var _0x21ba18=_0x2db41d['thermTarState'];if(_0x2db41d['thermTarState']==Characteristic['TargetHeatingCoolingState']['AUTO']){if(_0x2db41d['thermCurrentTemp']!=-0x64&&_0x2db41d['thermCoolSet']!=-(0xac781^0xac7e5)&&_0x2db41d['thermHeatSet']!=-0x64){var _0x262e1c=_0x2db41d['thermCurrentTemp']-_0x2db41d['thermCoolSet'];if(_0x262e1c<(0x416a4^0x416a4))_0x262e1c=_0x262e1c*-(0xca3d1^0xca3d0);var _0x4c14f8=_0x2db41d['thermCurrentTemp']-_0x2db41d['thermHeatSet'];if(_0x4c14f8<0x0)_0x4c14f8=_0x4c14f8*-(0x81005^0x81004);if(_0x262e1c<_0x4c14f8)_0x21ba18=Characteristic['TargetHeatingCoolingState']['COOL'];else _0x21ba18=Characteristic['TargetHeatingCoolingState']['HEAT'];}else{_0x21ba18=Characteristic['TargetHeatingCoolingState']['OFF'];}}if(_0x21ba18==Characteristic['TargetHeatingCoolingState']['COOL']){if(_0x2db41d['thermCoolSet']>=0xa&&_0x2db41d['thermCoolSet']<=0x26)_0x2db41d['thermostatService']['getCharacteristic'](Characteristic['TargetTemperature'])['updateValue'](_0x2db41d['thermCoolSet']);else _0x2db41d['log'](_0x2db41d['service'],'Current\x20cool\x20setpoint\x20is\x20outside\x20of\x20range.\x20\x20Cannot\x20set\x20target\x20temperature:\x20',_0x2db41d['thermCoolSet']);}}_0x2db41d['enableSetTemp']=!![];_0x2db41d['enableSetState']=!![];}},'httpRequest':function(_0x100b8e,_0x1e92b0,_0x51c899,_0x12c774,_0x45d2d7,_0x144593){request({'url':_0x100b8e,'body':_0x1e92b0,'method':_0x51c899,'rejectUnauthorized':![],'auth':{'user':_0x12c774,'pass':_0x45d2d7}},function(_0x540365,_0x534548,_0x196af3){_0x144593(_0x540365,_0x534548,_0x196af3);});},'setPowerState':function(_0x449f56,_0x1bcba1){var _0x5de22e=this;if(this['enable_level']&&this['brightness_url']&&(this['currentlevel']==0x0&&_0x449f56||this['currentlevel']>0x0&&!_0x449f56)){this['setBrightness'](_0x449f56?0x64:0x5c4d0^0x5c4d0,_0x1bcba1);return;}else if(this['enable_level']&&this['brightness_url']){_0x1bcba1();return;}if(this['enableSet']==!![]&&(this['currentlevel']==0x0||!_0x449f56)){var _0x16bf68;var _0x3dcdd6;if(this['enable_level'])this['state']=_0x449f56;if(!this['on_url']||!this['off_url']){_0x1bcba1(new Error('No\x20power\x20url\x20defined.'));return;}if(_0x449f56){_0x16bf68=this['on_url'];_0x3dcdd6=this['on_body'];}else{_0x16bf68=this['off_url'];_0x3dcdd6=this['off_body'];}this['httpRequest'](_0x16bf68,_0x3dcdd6,this['http_method'],this['username'],this['password'],function(_0x373eeb,_0x40b77a,_0x1bb5f8){if(_0x373eeb){this['log']('HTTP\x20set\x20power\x20function\x20failed:\x20%s',_0x373eeb['message']);_0x1bcba1(_0x373eeb);}else{_0x1bcba1();if(this['garageService']){if(this['garageCheck']!=-0x1){clearInterval(this['garageCheck']);this['garageCheck']=-0x1;}this['garageCheckCount']=0x0;this['garageCheck']=setInterval(function(){this['garageCheckCount']++;if(this['garageCheckCount']>0x1e){if(this['garageCheck']!=-(0xcdc16^0xcdc17)){clearInterval(this['garageCheck']);this['garageCheck']=-0x1;}return;}this['httpRequest'](this['status_url'],'','GET',this['username'],this['password'],function(_0x16533f,_0x4b1fcb,_0x4c0178){if(_0x16533f){return;}else{var _0x492cd3=parseInt(_0x4c0178['replace'](/\D/g,''));this['state']=_0x492cd3>0x0;this['enableSet']=![];this['garageService']['getCharacteristic'](Characteristic['CurrentDoorState'])['updateValue'](this['state']?Characteristic['CurrentDoorState']['CLOSED']:Characteristic['CurrentDoorState']['OPEN']);this['enableSet']=!![];}}['bind'](this));}['bind'](this),0x3e8);}else if(this['switchService']){if(this['keypad']=='yes'){this['switchCheck']=setInterval(function(){this['state']=![];this['enableSet']=![];this['switchService']['getCharacteristic'](Characteristic['On'])['updateValue'](this['state']);this['enableSet']=!![];}['bind'](this),0x3c3a3^0x3c473);}}}}['bind'](this));}else{_0x1bcba1();}},'setBrightness':function(_0x4abd1a,_0x3ddf67){var _0x2961f0=this;if(!this['enable_level']){_0x3ddf67();return;}if(this['enableSet']==!![]){if(!this['brightness_url']){_0x3ddf67(new Error('No\x20brightness\x20url\x20defined.'));return;}if(this['service']=='Fan')_0x4abd1a=Math['round'](_0x4abd1a/0x19);if(this['service']=='Blind'){if(this['enable_blind_onoff']=='yes'){if(_0x4abd1a>=0x32){_0x4abd1a=0xafbdc^0xafbb8;}else{_0x4abd1a=0x0;}}}this['currentlevel']=_0x4abd1a;setTimeout(function(){var _0x5dbcb6=_0x2961f0['brightness_url']['replace']('%b',_0x2961f0['currentlevel']);_0x2961f0['httpRequest'](_0x5dbcb6,'',_0x2961f0['http_brightness_method'],_0x2961f0['username'],_0x2961f0['password'],function(_0x1ca75b,_0x5dab57,_0x4d8bd4){if(_0x1ca75b){_0x2961f0['log']('HTTP\x20brightness\x20function\x20failed:\x20%s',_0x1ca75b);_0x3ddf67(_0x1ca75b);}else{_0x2961f0['enableSet']=![];if(_0x2961f0['lightbulbService']){_0x2961f0['lightbulbService']['getCharacteristic'](Characteristic['On'])['updateValue'](_0x2961f0['currentlevel']>0x0);_0x2961f0['lightbulbService']['getCharacteristic'](Characteristic['Brightness'])['updateValue'](_0x2961f0['currentlevel']);}if(_0x2961f0['fanService']){_0x2961f0['fanService']['getCharacteristic'](Characteristic['On'])['updateValue'](_0x2961f0['currentlevel']>(0xd5a17^0xd5a17));_0x2961f0['fanService']['getCharacteristic'](Characteristic['RotationSpeed'])['updateValue'](_0x2961f0['currentlevel']*(0xafbed^0xafbf4));}if(_0x2961f0['blindService']){_0x2961f0['blindService']['getCharacteristic'](Characteristic['PositionState'])['updateValue'](0x1);_0x2961f0['blindService']['getCharacteristic'](Characteristic['TargetPosition'])['updateValue'](_0x2961f0['currentlevel']);const _0x89ded8=setTimeout(function(){_0x2961f0['blindService']['getCharacteristic'](Characteristic['CurrentPosition'])['updateValue'](_0x2961f0['currentlevel']);_0x2961f0['blindService']['getCharacteristic'](Characteristic['PositionState'])['updateValue'](0x2);}['bind'](_0x2961f0),0x96);}_0x2961f0['enableSet']=!![];_0x3ddf67();}}['bind'](_0x2961f0));},0x74008^0x74124);}else{_0x3ddf67();}},'setHue':function(_0x18af33,_0x421186){var _0x1c3704=this;if(!this['enable_rgbw']){_0x421186();return;}if(this['enableSet']==!![]){if(!this['rgbw_url']){_0x421186(new Error('No\x20rgbw\x20url\x20defined.'));return;}this['getHue']=_0x18af33;setTimeout(function(){var _0x1c4d13=_0x1c3704['rgbw_url']['replace']('%b',_0x1c3704['getHue']);_0x1c3704['httpRequest'](_0x1c4d13,'',_0x1c3704['http_brightness_method'],_0x1c3704['username'],_0x1c3704['password'],function(_0x3b9605,_0x54b082,_0x2702d3){if(_0x3b9605){_0x1c3704['log']('HTTP\x20rgbw\x20function\x20failed:\x20%s',_0x3b9605);_0x421186(_0x3b9605);}else{_0x1c3704['enableSet']=![];if(_0x1c3704['lightbulbService']){_0x1c3704['lightbulbService']['getCharacteristic'](Characteristic['Hue'])['updateValue'](_0x1c3704['getHue']);}_0x1c3704['enableSet']=!![];_0x421186();}}['bind'](_0x1c3704));},0x5a664^0x5a748);}else{_0x421186();}},'setSat':function(_0x45a8d3,_0x333d8a){var _0x126fcf=this;if(!this['enable_rgbw']){_0x333d8a();return;}if(this['enableSet']==!![]){if(!this['sat_url']){_0x333d8a(new Error('No\x20sat\x20url\x20defined.'));return;}this['getSat']=_0x45a8d3;setTimeout(function(){var _0x4e2639=_0x126fcf['sat_url']['replace']('%b',_0x126fcf['getSat']);_0x126fcf['httpRequest'](_0x4e2639,'',_0x126fcf['http_brightness_method'],_0x126fcf['username'],_0x126fcf['password'],function(_0x23973c,_0x4e5ff8,_0x265597){if(_0x23973c){_0x126fcf['log']('HTTP\x20sat\x20function\x20failed:\x20%s',_0x23973c);_0x333d8a(_0x23973c);}else{_0x126fcf['enableSet']=![];if(_0x126fcf['lightbulbService']){_0x126fcf['lightbulbService']['getCharacteristic'](Characteristic['Saturation'])['updateValue'](_0x126fcf['getSat']);}_0x126fcf['enableSet']=!![];_0x333d8a();}}['bind'](_0x126fcf));},0x12c);}else{_0x333d8a();}},'setCct':function(_0x458a2c,_0x2fcd02){var _0x4fc28d=this;if(!this['enable_cct']){_0x2fcd02();return;}if(this['enableSet']==!![]){if(!this['cct_url']){_0x2fcd02(new Error('No\x20rgbw\x20url\x20defined.'));return;}this['getCct']=_0x458a2c;setTimeout(function(){var _0x151ba9=_0x4fc28d['cct_url']['replace']('%b',_0x4fc28d['getCct']);_0x4fc28d['httpRequest'](_0x151ba9,'',_0x4fc28d['http_brightness_method'],_0x4fc28d['username'],_0x4fc28d['password'],function(_0x392ca5,_0x7c72ff,_0x17c63f){if(_0x392ca5){_0x4fc28d['log']('HTTP\x20rgbw\x20function\x20failed:\x20%s',_0x392ca5);_0x2fcd02(_0x392ca5);}else{_0x4fc28d['enableSet']=![];if(_0x4fc28d['lightbulbService']){_0x4fc28d['lightbulbService']['getCharacteristic'](Characteristic['On'])['updateValue'](!![]);_0x4fc28d['lightbulbService']['getCharacteristic'](Characteristic['ColorTemperature'])['updateValue'](_0x4fc28d['getCct']);}_0x4fc28d['enableSet']=!![];_0x2fcd02();}}['bind'](_0x4fc28d));},0x3fa61^0x3fb4d);}else{_0x2fcd02();}},'setThermostatTargetHeatingCoolingState':function(_0x3c743b,_0x183668){var _0x443999=this;if(!this['enableSetState']){_0x183668();return;}if(!this['set_mode_url']){this['log']['warn']('Ignoring\x20request;\x20No\x20set\x20mode\x20url\x20defined.');_0x183668(new Error('No\x20set\x20mode\x20url\x20defined.'));return;}var _0x595bd1=this['off_string'];if(_0x3c743b==Characteristic['TargetHeatingCoolingState']['OFF']){_0x595bd1=this['off_string'];}else if(_0x3c743b==Characteristic['TargetHeatingCoolingState']['HEAT']){_0x595bd1=this['heat_string'];}else if(_0x3c743b==Characteristic['TargetHeatingCoolingState']['COOL']){_0x595bd1=this['cool_string'];}else if(_0x3c743b==Characteristic['TargetHeatingCoolingState']['AUTO']){_0x595bd1=this['auto_string'];}this['thermTarState']=_0x3c743b;var _0x3ce162=this['set_mode_url']['replace']('%m',_0x595bd1);this['httpRequest'](_0x3ce162,'','GET',this['username'],this['password'],function(_0x3cf530,_0xe591f1,_0x4aac2a){if(_0x3cf530){this['log']('HTTP\x20HVAC\x20mode\x20function\x20failed:\x20%s',_0x3cf530);_0x183668(_0x3cf530);}else{if(_0x443999['thermTarState']==Characteristic['TargetHeatingCoolingState']['AUTO']){if(_0x443999['thermCurrentTemp']!=-0x64&&_0x443999['thermCoolSet']!=-(0xeecf3^0xeec97)&&_0x443999['thermHeatSet']!=-(0xc39cb^0xc39af)){var _0x17a407=_0x443999['thermCurrentTemp']-_0x443999['thermCoolSet'];if(_0x17a407<(0xe6cb3^0xe6cb3))_0x17a407=_0x17a407*-(0x971a6^0x971a7);var _0x2f4b5f=_0x443999['thermCurrentTemp']-_0x443999['thermHeatSet'];if(_0x2f4b5f<0x0)_0x2f4b5f=_0x2f4b5f*-(0x9ad98^0x9ad99);if(_0x17a407<_0x2f4b5f)_0x3c743b=Characteristic['TargetHeatingCoolingState']['COOL'];else _0x3c743b=Characteristic['TargetHeatingCoolingState']['HEAT'];}else{_0x3c743b=Characteristic['TargetHeatingCoolingState']['OFF'];}}_0x443999['enableSetTemp']=![];if(_0x3c743b==Characteristic['TargetHeatingCoolingState']['COOL']&&_0x443999['thermCoolSet']!=-(0xac452^0xac436)){if(_0x443999['thermCoolSet']>=(0x9d98d^0x9d987)&&_0x443999['thermCoolSet']<=0x26)_0x443999['thermostatService']['getCharacteristic'](Characteristic['TargetTemperature'])['updateValue'](_0x443999['thermCoolSet']);else _0x443999['log'](_0x443999['service'],'Current\x20cool\x20setpoint\x20is\x20outside\x20of\x20range.\x20\x20Cannot\x20set\x20target\x20temperature:\x20',_0x443999['thermCoolSet']);}if(_0x3c743b==Characteristic['TargetHeatingCoolingState']['HEAT']&&_0x443999['thermHeatSet']!=-(0x8c86f^0x8c80b)){if(_0x443999['thermHeatSet']>=0xa&&_0x443999['thermHeatSet']<=(0x5c885^0x5c8a3))_0x443999['thermostatService']['getCharacteristic'](Characteristic['TargetTemperature'])['updateValue'](_0x443999['thermHeatSet']);else _0x443999['log'](_0x443999['service'],'Current\x20heat\x20setpoint\x20is\x20outside\x20of\x20range.\x20\x20Cannot\x20set\x20target\x20temperature:\x20',_0x443999['thermHeatSet']);}_0x443999['enableSetTemp']=!![];_0x183668();}}['bind'](this));},'setThermostatTargetTemp':function(_0x2cf2fb,_0x55eff5){var _0x45ab07=this;if(!this['enableSetTemp']){_0x55eff5();return;}if(_0x2cf2fb==-(0x896ca^0x896ae))return;if(!this['set_target_cool_url']||!this['set_target_heat_url']){this['log']['warn']('Ignoring\x20request;\x20Both\x20set\x20setpoint\x20urls\x20must\x20be\x20defined.');_0x55eff5(new Error('Both\x20set\x20setpoint\x20urls\x20must\x20be\x20defined.'));return;}var _0xd2ec67=this['thermTarState'];if(_0xd2ec67==Characteristic['TargetHeatingCoolingState']['OFF']||_0xd2ec67==Characteristic['TargetHeatingCoolingState']['AUTO']){if(this['thermCurrentTemp']!=-0x64&&this['thermCoolSet']!=-(0x81791^0x817f5)&&this['thermHeatSet']!=-0x64){var _0x3c3b28=this['thermCurrentTemp']-this['thermCoolSet'];if(_0x3c3b28<(0xf34f2^0xf34f2))_0x3c3b28=_0x3c3b28*-(0xe3149^0xe3148);var _0x409dc6=this['thermCurrentTemp']-this['thermHeatSet'];if(_0x409dc6<0x0)_0x409dc6=_0x409dc6*-0x1;if(_0x3c3b28<_0x409dc6)_0xd2ec67=Characteristic['TargetHeatingCoolingState']['COOL'];else _0xd2ec67=Characteristic['TargetHeatingCoolingState']['HEAT'];}else{_0xd2ec67=Characteristic['TargetHeatingCoolingState']['COOL'];}}var _0x3e6826=this['set_target_heat_url']['replace']('%c',_0x2cf2fb);var _0x34119a='heat\x20setpoint';if(_0xd2ec67==Characteristic['TargetHeatingCoolingState']['COOL']){_0x3e6826=this['set_target_cool_url']['replace']('%c',_0x2cf2fb);_0x34119a='cool\x20setpoint';}this['httpRequest'](_0x3e6826,'','GET',this['username'],this['password'],function(_0x23f4b5,_0x4ff9d2,_0x35a576){if(_0x23f4b5){this['log']('HTTP\x20HVAC\x20setpoint\x20function\x20failed:\x20%s',_0x23f4b5);_0x55eff5(_0x23f4b5);}else{_0x55eff5();}}['bind'](this));},'identify':function(_0x1dc9a5){this['log']('Identify\x20requested!');_0x1dc9a5();},'getServices':function(){var _0x58d1a2=this;var _0x57694c=new Service['AccessoryInformation']();_0x57694c['setCharacteristic'](Characteristic['Manufacturer'],this['manufacturer'])['setCharacteristic'](Characteristic['Model'],this['model'])['setCharacteristic'](Characteristic['SerialNumber'],this['serial']);switch(this['service']){case'Switch':{this['switchService']=new Service['Switch'](this['name']);this['switchService']['getCharacteristic'](Characteristic['On'])['on']('get',function(_0xba0cf5){_0xba0cf5(null,_0x58d1a2['state']);})['on']('set',this['setPowerState']['bind'](this));return[_0x57694c,this['switchService']];break;}case'Tv':{this['tvService']=new Service['Outlet'](this['name']);this['tvService']['getCharacteristic'](Characteristic['On'])['on']('get',function(_0x1f32f9){_0x1f32f9(null,_0x58d1a2['state']);})['on']('set',this['setPowerState']['bind'](this));return[_0x57694c,this['tvService']];break;}case'Light':case'Dimmer':case'RGBW':case'CCT':{this['lightbulbService']=new Service['Lightbulb'](this['name']);switch(this['switchHandling']){case'yes':case'realtime':this['lightbulbService']['getCharacteristic'](Characteristic['On'])['on']('get',function(_0x8f856b){_0x8f856b(null,_0x58d1a2['state']||_0x58d1a2['currentlevel']>(0x34f40^0x34f40));})['on']('set',this['setPowerState']['bind'](this));break;default:this['lightbulbService']['getCharacteristic'](Characteristic['On'])['on']('set',this['setPowerState']['bind'](this));break;}if(this['enable_rgbw']=='yes'){this['lightbulbService']['addCharacteristic'](new Characteristic['Hue']())['on']('get',function(_0x48d932){_0x48d932(null,_0x58d1a2['getHue']);})['on']('set',this['setHue']['bind'](this));this['lightbulbService']['addCharacteristic'](new Characteristic['Saturation']())['on']('get',function(_0x34417b){_0x34417b(null,_0x58d1a2['getSat']);})['on']('set',this['setSat']['bind'](this));}if(this['enable_cct']=='yes'){this['lightbulbService']['addCharacteristic'](new Characteristic['ColorTemperature']())['on']('get',function(_0x16973c){_0x16973c(null,_0x58d1a2['getCct']);})['on']('set',this['setCct']['bind'](this));}if(this['brightnessHandling']=='realtime'||this['brightnessHandling']=='yes'){this['lightbulbService']['addCharacteristic'](new Characteristic['Brightness']())['on']('get',function(_0x47bbcb){_0x47bbcb(null,_0x58d1a2['currentlevel']);})['on']('set',this['setBrightness']['bind'](this));}return[_0x57694c,this['lightbulbService']];break;}case'Door':{this['doorService']=new Service['Door'](this['name']);this['doorService']['getCharacteristic'](Characteristic['CurrentPosition'])['on']('get',function(_0x454683){_0x454683(null,_0x58d1a2['state']?0xd42bf^0xd42bf:0x5102d^0x51049);});this['doorService']['getCharacteristic'](Characteristic['TargetPosition'])['on']('get',function(_0x4c1f85){_0x4c1f85(null,_0x58d1a2['state']?0xafd6d^0xafd6d:0x82ac2^0x82aa6);})['on']('set',this['setPowerState']['bind'](this));this['doorService']['getCharacteristic'](Characteristic['PositionState'])['on']('get',function(_0x3e1c0a){_0x3e1c0a(null,0x2);});return[_0x57694c,this['doorService']];break;}case'Blind':{this['blindService']=new Service['WindowCovering'](this['name']);this['blindService']['getCharacteristic'](Characteristic['CurrentPosition'])['on']('get',function(_0x21e2b2){_0x21e2b2(null,_0x58d1a2['currentlevel']);});this['blindService']['getCharacteristic'](Characteristic['TargetPosition'])['on']('get',function(_0x221539){_0x221539(null,_0x58d1a2['currentlevel']);})['on']('set',this['setBrightness']['bind'](this));this['blindService']['getCharacteristic'](Characteristic['PositionState'])['on']('get',function(_0xc4671c){_0xc4671c(null,0x8fd22^0x8fd20);});return[_0x57694c,this['blindService']];break;}case'Window':{this['windowService']=new Service['Window'](this['name']);this['windowService']['getCharacteristic'](Characteristic['CurrentPosition'])['on']('get',function(_0x2af24a){_0x2af24a(null,_0x58d1a2['state']?0x0:0x64);});this['windowService']['getCharacteristic'](Characteristic['TargetPosition'])['on']('get',function(_0x4c8e0d){_0x4c8e0d(null,_0x58d1a2['state']?0x0:0x99029^0x9904d);})['on']('set',this['setPowerState']['bind'](this));this['windowService']['getCharacteristic'](Characteristic['PositionState'])['on']('get',function(_0x4ffe49){_0x4ffe49(null,0x2);});return[_0x57694c,this['windowService']];break;}case'Garage\x20Door':{this['garageService']=new Service['GarageDoorOpener'](this['name']);this['garageService']['getCharacteristic'](Characteristic['CurrentDoorState'])['on']('get',function(_0x1617f3){_0x1617f3(null,_0x58d1a2['state']?Characteristic['CurrentDoorState']['CLOSED']:Characteristic['CurrentDoorState']['OPEN']);});this['garageService']['getCharacteristic'](Characteristic['TargetDoorState'])['on']('get',function(_0x1cc425){_0x1cc425(null,_0x58d1a2['targetGarageDoorState']);})['on']('set',this['setPowerState']['bind'](this));this['garageService']['getCharacteristic'](Characteristic['ObstructionDetected'])['on']('get',function(_0x18b5e5){_0x18b5e5(null,![]);});return[_0x57694c,this['garageService']];break;}case'Lock':{this['lockService']=new Service['LockMechanism'](this['name']);this['lockService']['getCharacteristic'](Characteristic['LockCurrentState'])['on']('get',function(_0x7251fb){_0x7251fb(null,!_0x58d1a2['state']?Characteristic['LockCurrentState']['SECURED']:Characteristic['LockCurrentState']['UNSECURED']);});this['lockService']['getCharacteristic'](Characteristic['LockTargetState'])['on']('get',function(_0x220934){_0x220934(null,!_0x58d1a2['state']?Characteristic['LockCurrentState']['SECURED']:Characteristic['LockCurrentState']['UNSECURED']);})['on']('set',this['setPowerState']['bind'](this));return[_0x57694c,this['lockService']];break;}case'Contact':{this['contactService']=new Service['ContactSensor'](this['name']);this['contactService']['getCharacteristic'](Characteristic['ContactSensorState'])['on']('get',function(_0xfd4a53){var _0x5c1469=!![];if(_0x58d1a2['invert_contact']=='yes'){_0x5c1469=![];}_0xfd4a53(null,_0x58d1a2['state']==_0x5c1469?Characteristic['ContactSensorState']['CONTACT_DETECTED']:Characteristic['ContactSensorState']['CONTACT_NOT_DETECTED']);});return[_0x57694c,this['contactService']];break;}case'Doorbell':{this['cameraService']=new Service['CameraRTPStreamManagement'](this['name']);this['doorbellService']=new Service['Doorbell'](this['name']);this['doorbellService']['getCharacteristic'](Characteristic['ProgrammableSwitchEvent'])['on']('get',function(_0xc1604b){_0xc1604b(null,_0x58d1a2['lastSent']?0x1:0x0);});if(this['include_video'])return[_0x57694c,this['doorbellService'],this['cameraService']];else return[_0x57694c,this['doorbellService']];break;}case'Motion':{this['motionService']=new Service['MotionSensor'](this['name']);this['motionService']['getCharacteristic'](Characteristic['MotionDetected'])['on']('get',function(_0x241365){_0x241365(null,!_0x58d1a2['state']);});return[_0x57694c,this['motionService']];break;}case'Fan':{this['fanService']=new Service['Fan'](this['name']);this['fanService']['getCharacteristic'](Characteristic['On'])['on']('get',function(_0x248ed4){_0x248ed4(null,_0x58d1a2['state']);})['on']('set',this['setPowerState']['bind'](this));return[_0x57694c,this['fanService']];break;}case'Thermostat':{this['thermostatService']=new Service['Thermostat'](this['name']);this['thermostatService']['getCharacteristic'](Characteristic['CurrentHeatingCoolingState'])['on']('get',function(_0x1c1266){_0x1c1266(null,_0x58d1a2['thermStatus']);});this['thermostatService']['getCharacteristic'](Characteristic['TargetHeatingCoolingState'])['on']('get',function(_0x2b1c59){_0x2b1c59(null,_0x58d1a2['thermTarState']);})['on']('set',this['setThermostatTargetHeatingCoolingState']['bind'](this));this['thermostatService']['getCharacteristic'](Characteristic['CurrentTemperature'])['on']('get',function(_0x5b9fa0){_0x5b9fa0(null,_0x58d1a2['thermCurrentTemp']);});this['thermostatService']['getCharacteristic'](Characteristic['TargetTemperature'])['on']('get',function(_0x5447f5){if(_0x58d1a2['thermTarState']==Characteristic['TargetHeatingCoolingState']['OFF']||_0x58d1a2['thermTarState']==Characteristic['TargetHeatingCoolingState']['AUTO']){var _0x6990d7=Characteristic['TargetHeatingCoolingState']['OFF'];if(_0x58d1a2['thermCurrentTemp']!=-0x64&&_0x58d1a2['thermCoolSet']!=-0x64&&_0x58d1a2['thermHeatSet']!=-0x64){var _0x14374a=_0x58d1a2['thermCurrentTemp']-_0x58d1a2['thermCoolSet'];if(_0x14374a<(0xe2c84^0xe2c84))_0x14374a=_0x14374a*-0x1;var _0x21e80b=_0x58d1a2['thermCurrentTemp']-_0x58d1a2['thermHeatSet'];if(_0x21e80b<0x0)_0x21e80b=_0x21e80b*-0x1;if(_0x14374a<_0x21e80b)_0x6990d7=Characteristic['TargetHeatingCoolingState']['COOL'];else _0x6990d7=Characteristic['TargetHeatingCoolingState']['HEAT'];}if(_0x6990d7==Characteristic['TargetHeatingCoolingState']['COOL']){_0x5447f5(null,_0x58d1a2['thermCoolSet']);}else{_0x5447f5(null,_0x58d1a2['thermHeatSet']);}}else if(_0x58d1a2['thermTarState']==Characteristic['TargetHeatingCoolingState']['COOL']){_0x5447f5(null,_0x58d1a2['thermCoolSet']);}else if(_0x58d1a2['thermTarState']==Characteristic['TargetHeatingCoolingState']['HEAT']){_0x5447f5(null,_0x58d1a2['thermHeatSet']);}else{_0x58d1a2['log']('What?');}})['on']('set',this['setThermostatTargetTemp']['bind'](this));this['thermostatService']['getCharacteristic'](Characteristic['TemperatureDisplayUnits'])['on']('get',function(_0x2ce1b0){_0x2ce1b0(null,_0x58d1a2['thermDisplayUnits']);})['on']('set',function(_0x57622f,_0x46527f){_0x58d1a2['thermDisplayUnits']=_0x57622f;_0x46527f();});return[_0x57694c,this['thermostatService']];break;}}}};
